<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Canvas tutorial</title>
    <style type="text/css">
        body{
          margin:0;
          padding:0;
          font-family: "Comic Sans MS", cursive, sans-serif;
        }
        #gameArea {
          border: 1px solid black;
          position: absolute;
          left:     50%;
          top:      50%;
        }

        #ui-layer {
          background: rgba(255, 0, 0, 0.2);
          z-index: 3; 
          width: 100%;
          height: 10%;
        }
    
        canvas { position: absolute; }
        #game-layer { z-index: 2; }
        #background-layer { z-index: 1; }
    </style>
  </head>

  <body>
    <div id="gameArea">
      <div id="ui-layer">
        <span>Money: </span>
        <span id="money">100</span>
        <span>Wave: </span>
        <span id="wave">0 / 100</span>
      </div>
      <canvas id="game-layer"></canvas>
      <canvas id="background-layer"></canvas>
      <div id=”statsPanel”></div>
    </div>



    <script src="scripts/game.js"></script>
    <script src="scripts/gameModel.js"></script>
    <script src="scripts/data.js"></script>
    <script src="scripts/models.js"></script>
    <script src="scripts/canvas.js"></script>
    <script src="scripts/pathGenerator.js"></script>
    <script src="scripts/fbinstant.6.0.mock.js"></script>
    <script type="text/javascript">
      const BACKEND_URL = 'http://localhost:3000';
      const IMAGES = ['tiles', 'tiles-small'];
      let preloaded = {};
      
      window.onload = function() {
        FBInstant.initializeAsync().then(function() {

          //Preload resources
          IMAGES.forEach(function(imgName, index) {
            let img = new Image();
            img.src = './images/' + imgName + '.png';
            preloaded[imgName] = img;
            FBInstant.setLoadingProgress(Math.ceil(index / IMAGES.length)*100);
          })

          //Starting the game...
          FBInstant.startGameAsync().then(function() {
            startGame();
          })
        })
      }

      function selectContext() {
        FBInstant.context.chooseAsync()
          .then(function() {
            startGame();
          })
      }

      function startGame() {
        //initialize the game
        gameInit();

      }
    </script>

  </body>
</html>